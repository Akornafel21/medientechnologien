<html>
<head>
<title></title>
<link rel="stylesheet" type="text/css" href="format.css">
<style type="text/css">
        
                 a:link {font-family:Arial;        font-size:10pt;        text-decoration:none;}
                a:visited {font-family:Arial; font-size:10pt; text-decoration:none;}
                a:hover {color:#FF3333; text-decoration:none; font-weight:normal; font-size:10pt;}
     
</style>
</head>

<body>

<iframe src="oben.html" width="800" height="120" name="IFrame3" id="IFrame3" scrolling="no" frameborder="0">
         <p>Ihr Browser kann leider keine eingebe5tteten Frames anzeigen:Sie k&ouml;nnen die eingebettete Seite &uuml;ber den
         folgenden.</p>
</iframe>

<h1>Uebung 2</h1>
<h2>Bild-Grundlagen: Abtastung, Aliasing, Quantisierung</h2>
<br><h3>Aufgabe 1 - 1.1</h3>
<p>Erzeuge aus den beiden JPG-Bildern, die dir geschickt wurden, Bitmap-Bilder (BMP) im Format 960x540 Pixel, 24Bit</p>
<table><tr>
<td><img src="./bilder/Manmade_Bytewave.bmp" width="550" height="300"></td>
<td><img src="./bilder/Nature_Bytewave.bmp" width="550" height="300"></td>
</tr></table>
<br><h3>Aufgabe 1 - 1.2</h3>
<p>Nun lies die Bilder mit bmp_io ein und erkläre die Angaben im Header, die auf der Konsole ausgegeben werden! </p>
<br><p><!--Lösung-->-</p>

<br><p>Wie erklärt sich die Dateigröße für die beiden Dateien?</p>
<p><!--Lösung-->-</p>

<br><h2>Aufgabe 2 - Aliasing</h2>
<br><h3>Aufgabe 2 - 2.1</h3>
<p>Modifiziere bmp_io dahingehend, dass die RGB Werte der einzelnen Pixel in der BMP-Datei in eine (lesbare) ASCII-Datei geschrieben werden. <br>Es reichen dabei jeweils eine
    Zeile und eine Spalte! Lies die von mir geschickten Testdateien ein <br>und schätze aus den resultierenden Zahlenfolgen die Periodendauer in Pixeln in horizontaler und vertikaler
    Richtung. <br>(Jeweils eine Periode horizontal und eine vertikal für das Übungsprotokoll abspeichern).</p>
<p>Horizontal und Vertikal</p>    
<img src="./grating_H11.bmp" width="250">
<img src="./grating_V11.bmp" width="250">
<p>Schätzung der Periodendauer:</p>
<p> Horizontale Werte:
    <br>Die Werte wiederholen sich nach 36 Pixeln, beginnend und endend bei 1 1 1.
    <br>Horizontale Periodendauer: 36 Pixel
    <br><img src="./horizontal_ascii.jpg" width="100">
    <br> <br>
    <br>Die Werte wiederholen sich nach 24 Zeilen, beginnend und endend bei 118 118 118.
    <br>Vertikale Periodendauer: 24 Pixel
    <br><img src="./vertical_ascii.jpg" width="100">
    </p>

<br><h3>Aufgabe 2 - 2.2</h3>
<p>Auch bei der Bildabtastung muss das sogenannte Abtasttheorem eingehalten werden. 
    <br>Wie lautet es und wie läßt sich der Grenzfall, für den es gerade noch gilt, illustrieren
    (Zeichnung !)?</p>
<p>Das Abtasttheorem bei der Bildabtastung besagt, 2 Pixel pro Periode beträgt.<br>
    <br> ​Im Detail:
    <br> - Bild enthält räumliche Frequenzen
    <br>o Werden von den feinen Details und Strukturen im Bild bestimm
    <br>o muss mit mindestens 2 Pixeln pro Periode abgetastet werden
    <br>- bedeutet, dass…
    <br>o …kleinste Struktur im Bild, die noch korrekt dargestellt werden soll, durch mindestens 2 Pixel erfasst werden muss
    <br>▪ …um korrekte Rekonstruktion zu ermöglichen
    <br>▪ …um Aliasing zu vermeiden
    </p>

<br><h3>Aufgabe 2 - 2.3</h3>
<p>Erzeuge aus deinen eigenen Farbbildern Graustufen-Bilder. <br>Dazu muss der Helligkeitswert Y aus den RGB-Werten errechnet werden. 
    Es gibt dafür verschiedene Ansätze.<br>
    Nutze die Formel Y= 0,3 x R + 0,6 x G + 0,1 x B, die die Helligkeitsempfindlichkeit des Auges annähert. Mit diesem Y-Wert wird dann die R, G und B-Information überschrieben.
    Speichere die Graustufenbilder ab.</p>
<p><!--Lösung-->-</p>

<br><h3>Aufgabe 2 - 2.4</h3>
<p>Erkläre, wie bei Bild- und Videoaufnahmen Aliasing entstehen kann. <br>Ähnlich wie bei der 1. Übung am Audiosignal wollen wir auf das Bild ein Down-Sampling anwenden und
    sehen, wann dabei Aliasing auftritt. <br>Beim Audiosignal haben wir jedes zweite Sample verworfen und damit die Abtastfrequenz halbiert. <br>Beim Bild verringern wir die räumliche
    Auflösung, indem wir die Zahl der Bildzeilen bzw. Bildspalten verringern. <br>Dabei wollen wir das Bild allerdings nicht verkleinern - was normalerweise die Folge wäre - sondern einfach
    die ungeradzahligen Spalten durch den Inhalt der geradzahligen Spalten ersetzen,<br> d.h. Spalte 1 wird durch Spalte 0 ersetzt, Spalte 3 durch Spalte 2 etc. und analog für die Zeilen.<br>
    Wenn das Ursprungsbild nun sehr feine Strukturen aufweist, wie in machen Testdateien, können Aliasing-Verzerrungen sichtbar werden. <br>Achte darauf, dass stets Rot, Grün und
    Blau getrennt manipuliert werden müssen.</p>
<p>- Bei Bild- und Videoaufnahmen entsteht Aliasing:<br>
    <br>o wenn feine Strukturen/ Details im Bild aufgrund einer zu niedrigen Abtastrate nicht korrekt dargestellt werden können
    <br> o Effekt zeigt sich oft durch optische Artefakte wie:
    <br> ▪ Moiré-Muster
    <br> ▪ Treppeneffekte
    <br> o Treten auf, wenn Abtastrate nicht ausreicht, um Frequenz der Details wiederzugeben
    <br> - Aliasing sichtbar machen
    <br> o Bild durch Down-Sampling der räumlichen Auflösung manipulieren
    <br> ▪ ohne das Bild tatsächlich zu verkleinern
    <br>
    <br> - verschiedene Arten Down- Sampling durchzuführen:
    <br> o 1. Räumliche Auflösung verringern:
    <br> ▪ normalerweise bedeutet Verringern der Auflösung das Bild zu verkleinern
    <br> ▪ wollen stattdessen bestimmte Bildinformationen verwerfen und Bild in ursprünglicher Größe beibehalten
    <br><br> o 2. Zeilen und Spalten zusammenführen:
    <br> ▪ Inhalte jeder ungeraden Spalte und Zeile mit denen ihrer jeweiligen benachbarten geraden Spalte und Zeile ersetzen:
    <br>▪ Spalte 1 wird durch Inhalt von Spalte 0 ersetzt, Spalte 3 durch Spalte 2 usw.
    <br>▪ Ebenso werden Zeile 1, Zeile 3 usw. durch Inhalte der vorangehenden Zeilen ersetzt
    <br>▪ Prozess entspricht einer ‚Halbierung der räumlichen Frequenz‘ des Bildes
    <br>▪ ähnlich wie das Halbieren der Abtastfrequenz beim Audiosignal
    <br><br>o 3. *Verarbeitung für Farbkanäle (Rot, Grün, Blau)*:
    <br>▪ Bilder oft in RGB-Kanälen gespeichert
    <br>▪ Deswegen muss Down-Sampling für jeden Farbkanal einzeln durchgeführt werden
    <br>▪ Bei jedem Kanal wird das Verfahren angewendet, sodass die ungeraden Zeilen und Spalten durch die Inhalte der benachbarten Zeilen und Spalten ersetzt werden
    <br>- Aliasing und sichtbare Verzerrungen
    <br>o Wenn Ursprungsbild feine Strukturen enthält
    <br>▪ z. B. Linienmuster, Details mit hoher räumlicher Frequenz
    <br>o führt Verfahren zum Aliasing
    <br>o Erscheinungen könnten wie folgt aussehen:
    <br>▪ Moiré-Muster
    <br>▪ Wiederholte feine Muster im Bild
    <br>▪ aufgrund der Abtastung mit niedrigerer Auflösung nicht korrekt dargestellt und optisch neue, nicht existierende Muster erzeugt
    <br>▪ Verlust von Details
    <br>▪ Z.B. feine Linien, Kanten, könnten verschwimmen/ als dickere, undeutliche Bereiche erscheine
    <br>▪ Treppeneffekte (Staircase)
    <br>▪ Diagonale Linien und Kanten werden nicht glatt, sondern als "Stufen" dargestellt
    <br>▪ da Bild nicht genug Pixel zur Wiedergabe der genauen Form hat
    <br><br>- Zusammenfassung
    <br>o Aliasing tritt immer dann auf, wenn…
    <br>▪ …Auflösung nicht ausreicht, um feine Details im Bild darzustellen.
    <br>▪ Herabsetzen der räumlichen Frequenz durch das Entfernen von Spalten und Zeilen entspricht einer ‚Halbierung der Abtastrate‘
    <br>▪ Führt dazu, dass Frequenzen im Bild nicht korrekt wiedergegeben werden können</p>

<br><h3>Aufgabe 2 - 2.5</h3>
<p>Modifiziere bmp_io dahingehend, dass zunächst in jeder Zeile des eingelesenen Bilds jedes ungeradzahlige Pixel durch das davor liegende geradzahlige Pixel ersetzt wird
    (horizontales Down-Sampling). Diese Veränderung hat natürlich nur bei einem der beiden Testbilder Sinn (warum?). Speichere das resultierende Bild ab. Da sich die Bildgröße bei
    dieser Operation nicht ändert, muss der Bild-Header auch nicht verändert werden. Falls du im Ergebnis keine Veränderung sehen kannst, ersetze mehr Spalten, also Spalte 1 und 2
    durch Spalte 0, dann Spalte 1, 2 und 3 durch Spalte 0 usw. Wende diese Manipulation auf die Testbilder an, bis du eine Veränderung in Form eines Moiré-Musters siehst. Notiere,
    bei welcher Verringerung du die Veränderungen beobachtest und beschreibe die Veränderungen! Erkläre das Ergebnis an Hand der von dir bestimmten Periodendauer in Pixeln.</p>
    <p>Das horizontale Down-Sampling bei grating_H11.bmp zeigt interessante visuelle Veränderungen. 
        <br>   Bei einer Verringerung um den Faktor 2 sind bereits leichte Veränderungen erkennbar, während bei einer Verringerung um den Faktor 4 die Effekte deutlicher werden. 
        <br>   Diese Veränderungen entstehen, weil die verbleibenden Pixelmuster miteinander interagieren und einen Überlagerungseffekt erzeugen. 
        <br>   Dadurch entstehen Muster, die vorher nicht sichtbar waren und als Moiré-Muster wahrgenommen werden können. 
        <br>  Dies lässt sich durch die Periodendauer der Muster im Bild erklären, die durch das Down-Sampling verstärkt wird.
        <br>  
        <br>Grating_H11 horizontales Down-Sampling um 2
    <br><img src="./downsampling/grating_H11_horizontal_downsample_2.bmp" width="400">
    <br><br>Grating_H11 horizontales Down-Sampling um 4
    <br><img src="./downsampling/grating_H11_horizontal_downsample_4.bmp" width="400">

    <br><br>Grating_V11 horizontales Down-Sampling um 2
    <br><img src="./downsampling/grating_V11_horizontal_downsample_2.bmp" width="400">
    <br><br>Grating_V11 horizontales Down-Sampling um 4
    <br><img src="./downsampling/grating_V11_horizontal_downsample_4.bmp" width="400">
</p>
   <p>Nun wende die Zeilenverringerung vertikal an, d.h. ersetze die Pixel jeder ungeradzahligen Zeile durch die der Zeile davor (vertikales Down-Sampling). Auch hier hat die
    Manipulation nur bei einer der Testdateien Sinn!</p>
<p>Das vertikale Down-Sampling ist nur bei grating_V11.bmp sinnvoll, da dieses Bild vertikale Muster enthält, 
    <br> die durch die Manipulation verstärkt werden. Bei grating_H11.bmp, das horizontale Muster enthält, 
    <br>verliert das Bild durch vertikales Down-Sampling wichtige Informationen, ohne das ein Effekt sichtbar wird.
    <br>Daher führt hier das Down-Sampling nur bei grating_V11.bmp zu interessanten Moiré-Mustern.

    <br><br>Grating_V11 vertikales Down-Sampling um 2
    <br><img src="./downsampling/grating_V11_vertical_downsample_2.bmp" width="400">
    <br><br>Grating_V11 vertikales Down-Sampling um 4
    <br><img src="./downsampling/grating_V11_vertical_downsample_4.bmp" width="400">
    <br>
    <br>Grating_H11 vertikales Down-Sampling um 2
    <br><img src="./downsampling/grating_H11_vertical_downsample_2.bmp" width="400">
    <br><br>Grating_H11 vertikales Down-Sampling um 4
    <br><img src="./downsampling/grating_H11_vertical_downsample_4.bmp" width="400"></p>
    <br><br>
    <p>Abschließend wendest du noch das horizontale Downsampling auf deine eigenen Bilder an, bis du eine sichtbare Verschlechterung beobachtest. Notiere auch hier, wann dies bei
        deinen beiden Bildern der Fall ist.
        <br><br>
        Ab einem Downsampling-Faktor von 8 wird eine deutliche Verschlechterung sichtbar, da größere Pixelblöcke erkennbar werden und die Bilddetails anfangen, stark zu leiden. 
        <br> Bis zum Faktor 4 sind Veränderungen nur geringfügig sichtbar; die Bildqualität bleibt dabei weitgehend erhalten und Details sind noch gut erkennbar. 
        <br>Höhere Faktoren wie 16 führen jedoch zu einer erheblichen Verschlechterung, bei der die Bildstrukturen verschwimmen und kaum mehr zu identifizieren sind. 
        Insgesamt verliert das Bild bei Faktoren ab 8 zunehmend an Klarheit und Schärfe, <br>was es schwierig macht, feine Details oder die ursprünglichen Formen zu erkennen.
        <br><br>Manmade_Bytewave horizontales Down-Sampling um 4
        <br><img src="./downsampling/Manmade_horizontal_downsample_22_factor4.bmp" width="400">
        <br><br>Manmade_Bytewave horizontales Down-Sampling um 8
        <br><img src="./downsampling/Manmade_horizontal_downsample_22_factor8.bmp" width="400">
        <br><br>Manmade_Bytewave horizontales Down-Sampling um 16
        <br><img src="./downsampling/Manmade_horizontal_downsample_22_factor16.bmp" width="400">
        <br>
        <br>Nature_Bytewave horizontales Down-Sampling um 4
        <br><img src="./downsampling/Nature_horizontal_downsample_22_factor4.bmp" width="400">
        <br><br>Nature_Bytewave horizontales Down-Sampling um 8
        <br><img src="./downsampling/Nature_horizontal_downsample_22_factor8.bmp" width="400">
        <br><br>Nature_Bytewave horizontales Down-Sampling um 16
        <br><img src="./downsampling/Nature_horizontal_downsample_22_factor16.bmp" width="400">
    </p>

<br><h3>Aufgabe 3 - 3.1</h3>
<p>Wir wollen nun bmp_io so modifizieren, dass wir die Bitzahl reduzieren können. Dazu können wir z.B. alle RGB-Werte durch eine Potenz von 2 teilen (Integer-Division ohne
    Rest). Damit das resultierende Bild nicht dunkler wird als das Original, kompensieren wir die Operation durch Multiplikation mit derselben Zweierpotenz. Zu beachten: Der Datentyp
    hat nach wie vor eine Bittiefe von 24Bit (8bit pro Farbe!)
    (Denselben Effekt erreicht man auch durch einfaches logisches 'Verunden' mit einem entsprechenden HEX-Wert, indem man mit dem LSB beginnend Bits 'ausblendet'.)</p>
<p><!--Lösung-->-</p>

<br><h3>Aufgabe 3 - 3.2</h3>
<p>Mit dem entstandenen Programm verändern wir die in Aufgabe 1 erzeugten BMP-Dateien. Ab welcher Bitzahl tritt beim Detail-Bild und beim Flächen-Bild eine sichtbare
    Verschlechterung der Qualität ein? Wie kann man diese Verschlechterung am besten beschreiben? (Alle Ergebnisbilder ins Übungsprotokoll)</p>
<p><!--Lösung-->-</p>

<br><h3>Aufgabe 3 - 3.3</h3>
<p>Modifiziere dein Programm noch einmal so, dass auch das Differenzbild zwischen Original und bitreduziertem Bild, das heißt das Fehlerbild ausgegeben, werden kann. Dabei
    musst du auch bedenken, dass z.B. bei 1 Bit Reduzierung der Fehler nur 0 oder 1 wäre. Dieser Wertebereich wäre viel zu klein, als dass man ihn in der 8bit-Grafik noch sehen
    könnte. Daher muss der Fehler durch Multiplikation mit einer 2er Potenz verstärkt werden. In anderen Worten: Hat man vorher durch 2^n geteilt, sollte man das Differenzsignal mit
    2^(8-n-1) multiplizieren. So ist sichergestellt, dass der Verstärkungsfaktor mit der Anzahl der gelöschten Bits kleiner wird. Beachte außerdem, dass bei der Differenzbildung der
    Wert 0 Schwarz entspricht, während die Null-Linie im Bild-Wertebereich 0...255 aber bei 128, d.h. Mittelgrau, liegt. Daher muss das Differenzbild vor dem Abspeichern durch
    Addition von 128 in diesen Bereich gebracht werden.
    (Bilder all dieser Fälle ins Übungsprotokoll)</p>
<p><!--Lösung-->-</p>

</body>
</html>